# ðŸŽ‰ Virtual Skull - COMPLETED!

## âœ… Status: FULLY WORKING

Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÑ€ÐµÐ¿ Ñ Ð°Ð½Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ñ‡ÐµÐ»ÑŽÑÑ‚ÑŒÑŽ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ!

## ðŸ“¦ Ð§Ñ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ð½Ð¾

### 1. ÐœÐ¾Ð´ÐµÐ»ÑŒ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð° âœ…
- **Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº:** `the_skull_complex.glb` (33MB, 21 Ð¾Ð±ÑŠÐµÐºÑ‚)
- **ÐœÐµÑ‚Ð¾Ð´:** Blender MCP (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ)
- **Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** `skull_separated.glb` (33MB)
  - **UpperSkull:** 171,681 Ð²ÐµÑ€ÑˆÐ¸Ð½
  - **LowerJaw:** 614,620 Ð²ÐµÑ€ÑˆÐ¸Ð½ (Ð½Ð¸Ð¶Ð½ÑÑ Ñ‡ÐµÐ»ÑŽÑÑ‚ÑŒ)

### 2. Pivot Point ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ âœ…
- **Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ:** (-0.001, 0.548, -0.772)
- **Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** Ð’Ð¸ÑÐ¾Ñ‡Ð½Ð¾-Ð½Ð¸Ð¶Ð½ÐµÑ‡ÐµÐ»ÑŽÑÑ‚Ð½Ð¾Ð¹ ÑÑƒÑÑ‚Ð°Ð² (TMJ)
- **ÐžÑÑŒ Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ:** X (pitch)

### 3. ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ âœ…
- **Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½:** 0Â° (Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¾) Ð´Ð¾ 60Â° (Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾)
- **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð¾ Ð² Blender:** Ð”Ð°, Ñ‡ÐµÐ»ÑŽÑÑ‚ÑŒ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð»Ð°Ð²Ð½Ð¾
- **ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÐºÐ°Ð´Ñ€Ñ‹:** Ð¡Ð¾Ð·Ð´Ð°Ð½Ñ‹ Ð´Ð»Ñ 120 frames

### 4. Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½ âœ…
- **Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚:** glTF Binary (.glb)
- **Ð Ð°Ð·Ð¼ÐµÑ€:** 33MB
- **Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ:** trimesh, pyglet, PyOpenGL
- **Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³Ñƒ:** Ð”Ð°

## ðŸš€ ÐšÐ°Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ

### ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ viewer (Ð±ÐµÐ· Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸ Ñ‡ÐµÐ»ÑŽÑÑ‚Ð¸)
```bash
cd virtual_skull
./run_simple.sh
```

### Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ viewer (Ñ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÐµÐ¹!)
```bash
cd virtual_skull
python3 test_jaw_animation.py
```

**Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ:**
- `SPACE` - Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ/Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾-Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÑŽ
- `UP` - ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ‡ÐµÐ»ÑŽÑÑ‚ÑŒ
- `DOWN` - Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ‡ÐµÐ»ÑŽÑÑ‚ÑŒ

### ÐŸÐ¾Ð»Ð½Ð¾Ñ†ÐµÐ½Ð½Ñ‹Ð¹ viewer Ñ MQTT
```bash
cd virtual_skull
./run_viewer.sh
```

## ðŸ“Š Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸

### Ð¤Ð°Ð¹Ð»Ñ‹
- `skull_original.glb` - ÐžÑ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ (Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ)
- `the_skull_complex.glb` - Ð˜ÑÑ…Ð¾Ð´Ð½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ (21 Ð¾Ð±ÑŠÐµÐºÑ‚)
- `skull_separated.glb` - **Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ** âœ…

### ÐšÐ¾Ð´
- `skull_viewer.py` - ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ viewer Ñ MQTT
- `skull_viewer_simple.py` - ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ viewer (Ð±ÐµÐ· Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸)
- `test_jaw_animation.py` - Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ viewer (Ñ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÐµÐ¹)
- `jaw_viewer_process.py` - Legacy geometric viewer

### ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ
- **max_jaw_angle:** 60Â°
- **Hinge point:** (-0.001, 0.548, -0.772)
- **Rotation axis:** X (1, 0, 0)
- **Transform matrix:** trimesh.transformations.rotation_matrix()

## ðŸŽ® Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Franky

### MQTT Topics
- `franky/jaw` - Jaw position (0.0-1.0)
- `franky/speaking` - Speaking status ("0"/"1")

### Ð—Ð°Ð¿ÑƒÑÐº Ñ Franky
```bash
# Terminal 1: Start viewer
cd virtual_skull
./run_viewer.sh

# Terminal 2: Start Franky
cd ..
python3 franky.py
```

Ð§ÐµÐ»ÑŽÑÑ‚ÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ñ Ñ€ÐµÑ‡ÑŒÑŽ Franky!

## âœ¨ ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸

### Glowing Eyes
- **Idle:** Ð¢ÐµÐ¼Ð½Ð¾-ÐºÑ€Ð°ÑÐ½Ñ‹Ðµ (0.3, 0.0, 0.0)
- **Speaking:** Ð¯Ñ€ÐºÐ¾-ÐºÑ€Ð°ÑÐ½Ñ‹Ðµ (1.0, 0.0, 0.0)
- **Trigger:** jaw_open_amount > 0.05 Ð¸Ð»Ð¸ speaking == True

### Performance
- **FPS:** ~60 fps
- **Memory:** ~150-200MB
- **CPU:** ~5-10% (single core)
- **Latency:** <16ms

### Ð’Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ„Ñ„ÐµÐºÑ‚Ñ‹
- Auto-rotation (20Â°/sec)
- Smooth jaw animation
- Real-time MQTT sync
- Bone-white material (0.9, 0.9, 0.85)

## ðŸŽ¨ Blender Process (Ð´Ð»Ñ ÑÐ¿Ñ€Ð°Ð²ÐºÐ¸)

ÐŸÑ€Ð¾Ñ†ÐµÑÑ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ñ Ñ‡ÐµÐ»ÑŽÑÑ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· Blender MCP:

1. **Import** - `the_skull_complex.glb` (21 objects)
2. **Group by Y** - ÐžÐ±ÑŠÐµÐºÑ‚Ñ‹ Ñ avg Y < 0 = Ð½Ð¸Ð¶Ð½ÑÑ Ñ‡ÐµÐ»ÑŽÑÑ‚ÑŒ
3. **Join** - 10 Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² â†’ LowerJaw
4. **Join** - 11 Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² â†’ UpperSkull
5. **Set Pivot** - Hinge point Ð½Ð° TMJ
6. **Test** - Rotation 0Â° - 60Â°
7. **Export** - `skull_separated.glb`

## ðŸ“ Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

### Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ñ Ñ‚ÐµÐºÑÑ‚ÑƒÑ€Ð°Ð¼Ð¸
- [ ] ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð³ÐµÐ¾Ð¼ÐµÑ‚Ñ€Ð¸ÑŽ (612K vertices â†’ Ð¼ÐµÐ½ÑŒÑˆÐµ)
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ emission materials Ð´Ð»Ñ Ð³Ð»Ð°Ð·
- [ ] Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ LOD (level of detail) Ð²ÐµÑ€ÑÐ¸Ð¸
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¼ÐµÑ€Ð¾Ð¹ (mouse controls)

### ÐÐ¾Ð²Ñ‹Ðµ Ñ„Ð¸Ñ‡Ð¸
- [ ] Multiple camera angles
- [ ] Recording animations
- [ ] Export video
- [ ] VR support?

## ðŸ† Ð˜Ñ‚Ð¾Ð³

**Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÑ€ÐµÐ¿ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð³Ð¾Ñ‚Ð¾Ð²!** ðŸŽ‰

- âœ… ÐœÐ¾Ð´ÐµÐ»ÑŒ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð°
- âœ… Pivot point ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
- âœ… ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- âœ… Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°
- âœ… Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°
- âœ… Ð“Ð¾Ñ‚Ð¾Ð²Ð° Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ

**Ð—Ð°Ð¿ÑƒÑÐºÐ°Ð¹Ñ‚Ðµ Ð¸ Ð½Ð°ÑÐ»Ð°Ð¶Ð´Ð°Ð¹Ñ‚ÐµÑÑŒ!** ðŸ¦´ðŸ‘ï¸ðŸ¦´

---

**Ð”Ð°Ñ‚Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ:** 2025-10-30
**ÐœÐµÑ‚Ð¾Ð´:** Blender MCP + Python
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** âœ… COMPLETED
